{% extends "base.html" %}

{% block title %}Trang ch·ªß - Ph√¢n t√≠ch C·ªï phi·∫øu{% endblock %}

{% block content %}
<div class="hero-section">
    <div class="container">
        <!-- Quick Links -->
        <div class="quick-links">
            <a href="/watchlist" class="quick-link-btn">
                <span class="icon">‚≠ê</span>
                <span class="text">Danh s√°ch Theo d√µi</span>
            </a>
            <a href="/recommendations" class="quick-link-btn">
                <span class="icon">üí°</span>
                <span class="text">Khuy·∫øn ngh·ªã</span>
            </a>
        </div>

        <div class="hero-content">
            <h1 class="hero-title">Ph√¢n t√≠ch C·ªï phi·∫øu Chuy√™n nghi·ªáp</h1>
            <p class="hero-subtitle">Nh·∫≠p m√£ c·ªï phi·∫øu ƒë·ªÉ xem ph√¢n t√≠ch t√†i ch√≠nh chi ti·∫øt</p>

            <div class="search-card">
                <form method="POST" action="{{ url_for('analyze') }}" class="search-form">
                    <div class="input-group">
                        <input type="text" name="symbol" placeholder="Nh·∫≠p m√£ c·ªï phi·∫øu (VD: ACB, HPG, VNM, VCB...)"
                            class="search-input" required autofocus>
                        <button type="submit" class="search-button">
                            <span>Ph√¢n t√≠ch</span>
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M13 7l5 5m0 0l-5 5m5-5H6" />
                            </svg>
                        </button>
                    </div>
                </form>



                {% if error %}
                <div class="error-message">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                            clip-rule="evenodd" />
                    </svg>
                    <span>{{ error }}</span>
                </div>
                {% endif %}
            </div>

            <!-- Search History Section -->
            {% if search_history and search_history|length > 0 %}
            <div class="search-history-section" style="margin-top: 30px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h3 style="font-size: 18px; font-weight: 600; color: #1a1a1a; margin: 0;">
                        üìä L·ªãch s·ª≠ tra c·ª©u g·∫ßn ƒë√¢y
                    </h3>
                    <form action="{{ url_for('clear_history') }}" method="POST" style="display: inline;">
                        <button type="submit"
                            style="background: none; border: none; color: #ff6b6b; cursor: pointer; font-size: 14px; text-decoration: underline;">
                            X√≥a l·ªãch s·ª≠
                        </button>
                    </form>
                </div>
                <div class="history-grid"
                    style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px;">
                    {% for item in search_history %}
                    <form action="{{ url_for('analyze') }}" method="POST" style="margin: 0;">
                        <input type="hidden" name="symbol" value="{{ item.symbol }}">
                        <button type="submit" class="history-item" style="
                            width: 100%;
                            padding: 12px 15px;
                            background: #f8f9fa;
                            border: 1px solid #e0e0e0;
                            border-radius: 8px;
                            cursor: pointer;
                            text-align: left;
                            transition: all 0.2s;
                        ">
                            <div style="font-weight: 600; color: #1a1a1a; font-size: 14px; margin-bottom: 4px;">
                                {{ item.symbol }}
                            </div>
                            {% if item.company_name %}
                            <div
                                style="font-size: 12px; color: #666; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                {{ item.company_name }}
                            </div>
                            {% endif %}
                            <div style="font-size: 11px; color: #999; margin-top: 4px;">
                                {{ item.last_searched.strftime('%d/%m/%Y %H:%M') if item.last_searched else '' }}
                            </div>
                        </button>
                    </form>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üìà</div>
                    <h3>Bi·ªÉu ƒë·ªì Gi√°</h3>
                    <p>L·ªãch s·ª≠ gi√° v·ªõi c√°c ƒë∆∞·ªùng MA</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üí∞</div>
                    <h3>Ph√¢n t√≠ch T√†i ch√≠nh</h3>
                    <p>Doanh thu, l·ª£i nhu·∫≠n, FCF...</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üè¢</div>
                    <h3>Th√¥ng tin Doanh nghi·ªáp</h3>
                    <p>L√£nh ƒë·∫°o, s·ª± ki·ªán, c·ªï ƒë√¥ng...</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <h3>Ph√¢n t√≠ch Ng√†nh</h3>
                    <p>Ch·ªâ s·ªë chuy√™n bi·ªát theo ng√†nh</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container info-section">
    <h2 class="section-title">H·ªó tr·ª£ c√°c ng√†nh</h2>
    <div class="industry-list">
        <span class="industry-tag">Ng√¢n h√†ng</span>
        <span class="industry-tag">B·∫•t ƒë·ªông s·∫£n</span>
        <span class="industry-tag">B·∫£o hi·ªÉm</span>
        <span class="industry-tag">NƒÉng l∆∞·ª£ng</span>
        <span class="industry-tag">S·∫£n xu·∫•t</span>
        <span class="industry-tag">Th∆∞∆°ng m·∫°i</span>
    </div>
</div>
{% endblock %}